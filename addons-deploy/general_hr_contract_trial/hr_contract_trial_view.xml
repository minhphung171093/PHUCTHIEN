<openerp>
	<data>
		
		<record id="hr_contract_view_form_add_state" model="ir.ui.view">
            <field name="name">view.contract.form.add.state</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//sheet" position="before">
                		<header>
	                        <button name="action_finished" states="official" string="Finish" type="object" class="oe_highlight"/>
		                    <field name="state" widget="statusbar" statusbar_visible="trial,official,finished" statusbar_colors='{"official":"blue","finished":"grey"}'/>
		                </header>
                    </xpath>
                </data>
            </field>
        </record>
        
        <record id="hr_contract.action_hr_contract" model="ir.actions.act_window">
            <field name="name">Contracts</field>
            <field name="res_model">hr.contract</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','in',['official','finished'])]</field>
            <field name="context">{'search_default_current':1,'default_state':'official'}</field>
            <field name="search_view_id" ref="hr_contract.hr_contract_view_search"/>
        </record>
        
        <!-- Trial Views -->
        <record id="hr_contract_trial_view_form" model="ir.ui.view">
            <field name="name">hr.contract.trial.view.form</field>
            <field name="model">hr.contract</field>
            <field name="arch" type="xml">
                <form string="Contract" version="7.0">
                	<header>
                        <button name="action_official" states="trial" string="Official" type="object" class="oe_highlight"/>
	                    <field name="state" widget="statusbar" statusbar_visible="trial,official,finished" statusbar_colors='{"official":"blue","finished":"grey"}'/>
	                </header>
                    <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Contract Reference"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="employee_id"/>
                            <field name="job_id"/>
                        </group>
                        <group>
                            <field name="type_id"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Information" name="information">
                            <group>
                                <group name="salary_and_advantages" string="Salary and Advantages">
                                    <field name="wage"/>
                                    <field name="advantages" nolabel="1" placeholder="Advantages..." colspan="2"/>
                                </group>
                                <group name="trial_duration_group" string="Trial Duration">
                                    <label for="trial_date_start" string="Trial Period Duration"/>
                                    <div>
                                        <field name="trial_date_start" class="oe_inline" required='1'/> - <field name="trial_date_end" class="oe_inline" required='1'/>
                                    </div>
                                    <field name="working_hours"/>
                                </group>
                            </group>
                            <separator string="Notes"/>
                            <field name="notes"/>
                        </page>
                        <page string="Work Permit">
                            <group col="4">
                                <field name="visa_no"/>
                                <field name="permit_no"/>
                                <field name="visa_expire"/>
                            </group>
                        </page>
                        <page string="Histories">
                        	<field name="contract_history" nolabel='1'/>
                        </page>
                    </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="hr_contract_trial_view_tree" model="ir.ui.view">
            <field name="name">hr.contract.trial.view.tree</field>
            <field name="model">hr.contract</field>
            <field name="arch" type="xml">
                <tree string="Contracts">
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="type_id"/>
                    <field name="job_id"/>
                    <field name="working_hours"/>
                    <field name="trial_date_start"/>
                    <field name="trial_date_end"/>
                    <field name="wage"/>
                </tree>
            </field>
        </record>
        
        <record id="action_hr_contract_trial" model="ir.actions.act_window">
            <field name="name">Trial Contracts</field>
            <field name="res_model">hr.contract</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','in',['trial'])]</field>
            <field name="context">{'search_default_current':1,'default_state':'trial'}</field>
            <field name="search_view_id" ref="hr_contract.hr_contract_view_search"/>
        </record>
        
        <record id="action_hr_contract_trial_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="hr_contract_trial_view_tree"/>
            <field name="act_window_id" ref="action_hr_contract_trial"/>
        </record>

        <record id="action_hr_contract_trial_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="hr_contract_trial_view_form"/>
            <field name="act_window_id" ref="action_hr_contract_trial"/>
        </record>
        
        <menuitem action="action_hr_contract_trial" id="menu_action_hr_contract_trial" parent="hr.menu_hr_main" name="Trial Contracts" sequence="3" groups="base.group_hr_manager"/>
        
    </data>
</openerp>