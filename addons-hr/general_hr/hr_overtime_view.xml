<?xml version="1.0" encoding="utf-8"?>
<openerp>
 <data>
		<record id="view_hr_overtime_form" model="ir.ui.view">
            <field name="name">hr.overtime.form</field>
            <field name="model">hr.overtime</field>
            <field name="arch" type="xml">
                <form string="Employee Overtime" version="7.0">
                	<header>
	                    <button string="Approved" name="confirm" states="to_approve,refuse" type="object" class="oe_highlight"/>
	                    <button string="Refused" name="refuse" states="to_approve,confirm" type="object" class="oe_highlight"/>
	                    <button string="Cancelled" name="cancelled" states="to_approve,confirm,refuse" type="object" class="oe_highlight"/>
	                    <field name="state" widget="statusbar" statusbar_colors='{"confirm":"blue","to_approve":"blue","refuse":"red"}'/>
                    </header>
                    <sheet>
	                    <group>
	                    	<group>
	                        	<field name="name" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
	                        	<field name="date" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
	                        	<label for="durations" string="Duration" help="The default duration interval between the starting hour and the ending hour."/>
	                        	<div>
                                	<group col="3">
	                        			<field name="hour_start" widget="float_time" nolabel="1" on_change="onchange_hour_start(hour_start, hour_end)" required="1" class="oe_inline" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
                                		<label string="-" class="oe_inline"/>
                                		<field name="hour_end" widget="float_time" nolabel="1" on_change="onchange_hour_start(hour_start, hour_end)" required="1" class="oe_inline" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
	                        		</group>
	                        		<div>
	                        			<field name="durations" class="oe_inline" /> hour
	                        		</div>
	                        	</div>
	                        </group>
                            <group>
                           		<field name="employee_id" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>\
                           		<field name="type_id" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
                           		<field name="reason" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
	                        </group>
	                    </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="view_hr_overtime_tree" model="ir.ui.view">
            <field name="name">hr.overtime.tree</field>
            <field name="model">hr.overtime</field>
            <field name="arch" type="xml">
                <tree string="Employee Overtime" >
                    <field name="name"/>
                    <field name="date"/>
                    <field name="hour_start" widget="float_time"/>
                    <field name="hour_end" widget="float_time"/>
                    <field name="durations"/>
                    <field name="employee_id"/>
                    <field name="type_id"/>
                    <field name="month" invisible="1"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>


        <record model="ir.ui.view" id="view_hr_overtime_filter">
            <field name="name">view_hr_overtime_filter</field>
            <field name="model">hr.overtime</field>
            <field name="arch" type="xml">
                <search string="Employee Overtime Search">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="employee_id"/>
                    <separator/>
                    <group expand="0" string="Group By...">
                        <filter string="Date" icon="terp-go-today" domain="[]" context="{'group_by':'date'}"/>
                        <filter string="Employee" icon="terp-go-today" domain="[]" context="{'group_by':'employee_id'}"/>
                        <filter string="Month" icon="terp-go-today" domain="[]" context="{'group_by':'month'}"/>
                        <filter string="Type" icon="terp-go-today" domain="[]" context="{'group_by':'type_id'}"/>
                        <filter string="Status" icon="terp-go-today" domain="[]" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="open_view_hr_overtime" model="ir.actions.act_window">
            <field name="name">Employee Overtime</field>
            <field name="res_model">hr.overtime</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{"search_default_today":1}</field>
            <field name="search_view_id" ref="view_hr_overtime_filter" />
            <field name="help"></field>
        </record>
        <menuitem id="view_hr_overtime" name="Overtime" parent="hr.menu_hr_root" sequence="21"/>
        <menuitem action="open_view_hr_overtime" id="menu_open_view_hr_overtime" parent="view_hr_overtime" sequence="1" />
        
        <record model="ir.ui.view" id="view_overtime_summary">
            <field name="name">hr.overtime.report_tree</field>
            <field name="model">hr.overtime</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <tree colors="red:state == 'refuse';black:state in ('confirm','to_approve')" string="Overtime Summary">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="employee_id"/>
                    <field name="type_id"/>
                    <field name="durations" string="Durations" sum="Durations"/>
                    <field name="hour_start" widget="float_time"/>
                    <field name="hour_end" widget="float_time"/>
                    <field name="month" invisible="1"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="open_overtime_summary">
            <field name="name">Overtime Summary</field>
            <field name="res_model">hr.overtime</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" eval="view_overtime_summary"/>
            <field name="context">{'group_by':['month','date','employee_id']}</field>
            <field name="domain">[]</field>
            <field name="search_view_id" ref="view_hr_overtime_filter"/>
        </record>

        <menuitem name="Overtime Summary" parent="view_hr_overtime" id="menu_open_overtime_summary" action="open_overtime_summary" sequence="2"/>
        
 </data>  
</openerp>
